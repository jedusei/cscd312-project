(this.webpackJsonpfrontend_react=this.webpackJsonpfrontend_react||[]).push([[0],{46:function(e,a,t){e.exports=t(57)},51:function(e,a,t){},57:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(7),o=t.n(l),c=(t(51),t(35)),i=t.n(c),s=t(39),m=t(22),u=t(93),d=t(96),p=t(98),f=t(100),b=t(99),g=t(104),v=t(105),h=t(102),E=t(103),y=t(101),w=t(36),x=(t(53),Object(u.a)((function(e){return{root:{flexGrow:1},appBarIcon:{display:"flex",marginRight:e.spacing(2)},title:{flexGrow:1},container:{display:"flex",flexDirection:"column",alignItems:"center",paddingTop:50,paddingBottom:50},stepTitle:{width:"30%",marginTop:20,marginBottom:10},img:{marginTop:10},formControl:{margin:e.spacing(1),minWidth:120},placeholder_img_overlay:{position:"absolute",left:0,right:0,top:0,bottom:0,backgroundColor:"#00000080",display:"flex",alignItems:"center",justifyContent:"center"},label_box_container:{position:"absolute",left:0,right:0,top:0,bottom:0},label_box:{borderStyle:"dashed",borderWidth:2},label:{position:"absolute",left:-2,top:-24,lineHeight:"14px",padding:"5px",whiteSpace:"nowrap"}}})));function N(e){var a=e.label,t=e.coords,n=e.labelClassName,l=e.boxClassName,o=e.darkMode;return r.a.createElement("div",{className:l,style:{borderColor:o?"#000000cc":"#ffffffcc",position:"absolute",left:t[0],top:t[1],width:t[2]-t[0],height:t[3]-t[1]}},r.a.createElement("span",{className:n,style:{backgroundColor:o?"#000000cc":"#ffffffcc",color:o?"#fff":"#000"}},a))}var k=function(){var e,a=x(),t=r.a.useState(1),n=Object(m.a)(t,2),l=n[0],o=n[1],c=r.a.useState(),u=Object(m.a)(c,2),k=u[0],j=u[1],C=r.a.useState(),S=Object(m.a)(C,2),_=S[0],O=S[1],I=r.a.useState(!1),T=Object(m.a)(I,2),B=T[0],L=T[1],R=r.a.useState(!1),U=Object(m.a)(R,2),M=U[0],F=U[1],W=r.a.useState(),D=Object(m.a)(W,2),J=D[0],z=D[1],A=function(e){var a=e.target.files[0];j(a),L(!1),z(!1),""!==_&&URL.revokeObjectURL(_),O(a?URL.createObjectURL(a):""),o(a?2:1)};return r.a.createElement("div",{className:a.root},r.a.createElement(d.a,{position:"static"},r.a.createElement(p.a,null,r.a.createElement("div",{className:a.appBarIcon},r.a.createElement(b.a,null,"blur_on")),r.a.createElement(f.a,{variant:"h6",className:a.title},"AI - Multiple Object Recognition"),r.a.createElement("div",{style:{marginLeft:"auto"}},r.a.createElement(f.a,{variant:"h6",style:{opacity:.8}},"By Joseph Edusei & Ofoe Agbettor")))),r.a.createElement("div",{className:a.container},r.a.createElement(f.a,{variant:"h6",className:a.stepTitle},"1. Select Image"),r.a.createElement("input",{type:"file",accept:"image/*",onChange:A,disabled:l>2,ref:function(a){return e=a}}),k&&r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{src:_,alt:"",className:a.img}),r.a.createElement(f.a,{variant:"h6",className:a.stepTitle},"2. Upload Image")),(2===l&&!B||l>2)&&r.a.createElement(y.a,{variant:"contained",color:"primary",disabled:2!==l,onClick:function(){if(!B){L(!0);var e=new FormData;e.append("image",k),fetch("/api/detect",{method:"POST",body:e}).then((function(e){return e.json()})).then((function(e){o(3),L(!1);var a=setInterval(Object(s.a)(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat("","/api/results?job_id=").concat(e.job_id)).then((function(e){return e.json()}));case 3:(n=t.sent).completed&&(z(n),clearInterval(a)),t.next=12;break;case 7:t.prev=7,t.t0=t.catch(0),alert("Something went wrong. Please try again later."),clearInterval(a),o(2);case 12:case"end":return t.stop()}}),t,null,[[0,7]])}))),5e3)})).catch((function(){alert("Couldn't connect to server. Make sure the server is running and try again."),L(!1)}))}}},"Upload"),k&&B&&!J&&r.a.createElement(y.a,{variant:"contained",color:"primary",disabled:!0},r.a.createElement("span",null," ",r.a.createElement(w.Bounce,{size:15,color:"#fff"}))),3===l&&r.a.createElement(f.a,{variant:"h6",className:a.stepTitle},"3. View Result"),3===l&&r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{className:a.formControl},r.a.createElement(g.a,{id:"color-label"},"Label color"),r.a.createElement(E.a,{labelId:"color-label",id:"label-select",value:M,onChange:function(e){return F(e.target.value)}},r.a.createElement(v.a,{value:!1},"Light"),r.a.createElement(v.a,{value:!0},"Dark"))),r.a.createElement("div",{className:a.img,style:{position:"relative"}},r.a.createElement("img",{src:_,alt:""}),J?[r.a.createElement("div",{key:0,className:a.label_box_container},J.labels.map((function(e,t){return J.scores[t]>.4&&r.a.createElement(N,{key:String(t),labelClassName:a.label,boxClassName:a.label_box,darkMode:M,label:"".concat(e," (").concat((100*J.scores[t]).toFixed(2),"%)"),coords:J.boxes[t]})})))]:r.a.createElement("div",{className:a.placeholder_img_overlay},r.a.createElement(w.Spinner,{size:20,color:"#fff"})))),3===l&&r.a.createElement("div",{style:{marginTop:30}},r.a.createElement(y.a,{variant:"contained",color:"primary",onClick:function(){e.value=null,A({target:e})}},"Start Over"))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[46,1,2]]]);
//# sourceMappingURL=main.4ebdbc8f.chunk.js.map